# 動物病院ホームページ 要件定義書

## 1. プロジェクト概要
Laravelフレームワークを用いた動物病院のホームページを開発する。主な目的は、顧客によるオンライン予約機能と、病院からの休診日情報の提供である。

## 2. 機能要件

### 2.1. 顧客向け機能
- **会員登録・ログイン:** 顧客が自身の情報でアカウントを作成・利用できる。
- **予約機能:**
    - 日付と時間帯を指定して診察の予約を行える。
    - 予約可能な日時のみ選択できるUIを提供する。休診日や予約状況に応じて動的に変化するカレンダーUIを実装する。
- **予約確認・キャンセル:** 自身の予約状況を確認し、不要になった予約をキャンセルできる。
- **休診日カレンダーの閲覧:** 病院の定休日や臨時休診日をカレンダー形式で確認できる。

### 2.2. 従業員向け機能（管理画面）
- **ログイン機能:** 権限を持つ従業員のみが管理画面にアクセスできる。
- **予約管理:**
    - すべての予約を一覧で確認できる。
    - 日付や顧客名で予約情報を検索できる。
- **臨時休診日の管理:** 学会などで発生する臨時の休みを登録・削除できる。

### 2.3. コンテンツ表示機能
- **トップページ:**
    - 病院の魅力が伝わるデザインとレイアウト。
    - お知らせやアクセス情報へのリンクを掲載。
- **病院紹介ページ:**
    - 院長の挨拶、理念、スタッフ紹介などを掲載する。
- **お客様の声ページ:**
    - サービスを利用した顧客からの感想や写真を掲載する。

### 2.4. 将来的な拡張機能
- お知らせ・キャンペーン情報の掲載機能の動的化（管理画面からの更新）。
- お客様の声の投稿・管理機能。

## 3. 認証アーキテクチャ
顧客(User)と従業員(Staff)で認証の仕組みを分離する「マルチ認証」を採用する。

- **顧客認証:**
    - Laravel標準の認証機能を利用する。
    - ログインURL: `/login`
- **従業員認証:**
    - 従業員専用の認証ガード(`admin`など)を別途用意する。
    - ログインURL: `/admin/login` など、一般には公開しない専用URLを用意し、従業員は直接そのURLにアクセスする。
    - これにより、ホームページの見た目の美しさを損なわず、セキュアな管理画面アクセスを実現する。

## 4. 予約システムの仕様

### 4.1. 予約プロセス
顧客はカレンダーから日付と時間帯を選択して予約を行う。

### 4.2. 予約の制約（バリデーション）
以下の条件に合致する場合、予約は受け付けない。
1. **定休日:** 病院が定めた定休日（例: 毎週日曜日）。
2. **臨時休診日:** 従業員が別途登録した臨時休診日。
3. **予約重複:** 既に他の予約で埋まっている時間帯。

## 5. データベース設計（案）

### 5.1. 主要モデル
| モデル名 (単数形) | テーブル名 (複数形) | 説明 |
| :--- | :--- | :--- |
| `User` | `users` | 顧客の情報 |
| `Staff` | `staffs` | 従業員の情報 |
| `Reservation` | `reservations` | 予約情報 |
| `Holiday` | `holidays` | 臨時休診日の情報 |

### 5.2. テーブルカラム案
- **users:** `id`, `name`, `email`, `password`, etc. (Laravel標準)
- **staffs:** `id`, `name`, `email`, `password`, etc.
- **reservations:** `id`, `user_id` (FK), `reservation_datetime`
- **holidays:** `id`, `holiday_date`, `description` (休診理由を保存するテキスト)

---
*このドキュメントは、プロジェクトの進行に合わせて更新されるものとします。*
