# 開発フロー計画書 (Dockerなし環境)

このドキュメントは、「開発計画書」に基づき、Dockerを使用しないローカル開発環境での具体的な開発フローを定義します。

## 0. 前提条件：環境の統一

開発をスムーズに進めるため、チーム全員が以下の環境を統一することを必須とします。

- **PHPのバージョン:** `php -v`で確認し、メジャーバージョンを統一する (例: 8.2.x)
- **Node.jsのバージョン:** `node -v`で確認し、LTS版のメジャーバージョンを統一する (例: 20.x)
- **Composer / NPM:** 最新版の利用を推奨
- **データベース:** 開発に用いるDBの種類を統一する (例: MySQL 8.0)

---

## フェーズ1: 準備と基盤構築 (1〜3日目)

### 1.1. リーダーのタスク (先行作業)

1.  **Laravelプロジェクト作成とリポジトリ準備**
    ```bash
    # プロジェクト作成
    composer create-project laravel/laravel group-project
    cd group-project
    
    # Gitリポジトリを初期化し、GitHubにプッシュ
    git init
    git add .
    git commit -m "Initial commit"
    # GitHubリポジトリに接続してプッシュ
    ```

2.  **基本認証機能の実装**
    ```bash
    # Laravel Breezeをインストール
    composer require laravel/breeze --dev
    php artisan breeze:install
    
    # 依存関係のインストールとビルド
    npm install
    npm run build
    ```

3.  **データベースマイグレーションの作成**
    - `php artisan make:model Staff -m`
    - `php artisan make:model Reservation -m`
    - `php artisan make:model Holiday -m`
    - 作成したマイグレーションファイルに必要なカラムを定義します。

4.  **初期コードを`develop`ブランチにプッシュ**
    - 全員がこの状態から開発を始められるように、`develop`ブランチを作成し、ここまでの変更をプッシュします。

### 1.2. 全員がおこなう環境構築

リーダーの作業完了後、全メンバーが以下の手順でローカル環境をセットアップします。

```bash
# 1. リポジトリをクローンし、developブランチに移動
git clone <リポジトリURL>
cd group-project
git checkout develop

# 2. PHPの依存関係をインストール
composer install

# 3. .envファイルの作成と設定
cp .env.example .env
php artisan key:generate

# --- ここで.envファイルを開き、DB接続情報を各自の環境に合わせて編集 ---
# DB_DATABASE=group_project
# DB_USERNAME=root
# DB_PASSWORD=password

# 4. データベースのマイグレーションを実行
# (事前にDBクライアントで .env に設定したDB名でデータベースを作成しておく)
php artisan migrate

# 5. フロントエンドの依存関係をインストール
npm install

# 6. ローカルサーバーを起動して動作確認
php artisan serve
```
- `http://127.0.0.1:8000` にアクセスし、Laravelの初期画面（ログイン/登録画面）が表示されることを確認します。

### 1.3. 各チームの作業開始

- **静的ページチーム:** `npm run dev` を実行してファイルの変更監視を有効にし、HTML/CSSの作成を開始します。
- **Blade化チーム:** Laravelのディレクトリ構成とBladeの記法を学習し、共通レイアウトの作成準備を進めます。

---

## フェーズ2: 並行開発と連携 (4〜10日目)

開発の進行は、**Pull Request (PR)** をベースに行います。

1.  **静的ページチーム**
    - ページ単位（例: トップページ）でHTML/CSSを作成します。
    - 完成したら `feature/static-top-page` のようなブランチを作成し、`develop`ブランチへのPRを作成します。
    - PRがマージされたら、次のページの作成に取り掛かります。

2.  **Blade化チーム**
    - 静的ページチームがマージしたHTMLを、Bladeテンプレートに変換します。
    - `feature/blade-top-page` のようなブランチで作業し、`develop`へのPRを作成します。
    - ルーティング (`routes/web.php`) と簡単なコントローラーもこの時に作成します。

3.  **リーダー (バックエンド)**
    - Blade化されたページに、認証機能や予約機能のロジックを結合していきます。
    - フロントエンドが必要とするデータ（例: お知らせ一覧）を返すためのAPIエンドポイントを準備します。

**開発中のコマンド:**
- CSSやJSの変更を反映させるため、開発中はターミナルで `npm run dev` を実行し続けてください。
- DB構造が更新された際は、`git pull`後に `php artisan migrate` を実行してください。

---

## フェーズ3: 結合とテスト (11〜14日目)

1.  **全機能の結合:** `develop`ブランチに全ての機能がマージされた状態で、最終的な動作確認を行います。
2.  **テスト項目:**
    - 会員登録〜ログイン〜ログアウトのフロー
    - 各ページの表示とデザイン崩れのチェック
    - 予約ページの画面遷移
3.  **バグ修正:** 見つかった問題を修正します。
4.  **プロトタイプ完成:** 全ての修正が完了したら、`develop`ブランチを`main`ブランチにマージし、プロトタイプの完成とします。
